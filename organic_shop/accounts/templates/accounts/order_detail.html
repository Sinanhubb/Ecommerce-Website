{% extends 'shop/base.html' %}
{% block content %}
<div class="container py-5">
  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">üßæ Order #{{ order.id }} Details</h2>
    <span class="badge bg-primary fs-6">Status: {{ order.get_status_display }}</span>
  </div>

  <!-- Order Info Card -->
  <div class="card mb-4 shadow-sm border-0">
    <div class="card-body">
      <h5 class="card-title mb-3">Order Information</h5>
      <p class="mb-1"><strong>Order Date:</strong> {{ order.created_at|date:"d M Y, H:i A" }}</p>
      <p class="mb-1"><strong>Payment Method:</strong> {{ order.payment_method }}</p>
      <p class="mb-0"><strong>Shipping Address:</strong> <br>
        {{ order.address.full_name }}<br>
        {{ order.address.address_line }}<br>
        {{ order.address.city }}, {{ order.address.country }} - {{ order.address.postal_code }}
      </p>
    </div>
  </div>

  <!-- Order Items Card -->
  <div class="card mb-4 shadow-sm border-0">
    <div class="card-header bg-light fw-bold">Order Items</div>
    <ul class="list-group list-group-flush">
      {% for item in items %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <h6 class="mb-1">{{ item.product.name }}</h6>
          <small class="text-muted">Quantity: {{ item.quantity }}</small>
        </div>
        <span class="fw-semibold">‚Çπ{{ item.price|floatformat:2 }}</span>
      </li>
      {% endfor %}
    </ul>
  </div>

  <!-- Summary Card -->
  <div class="card p-4 shadow-sm border-0 bg-light">
    <h5 class="fw-bold mb-3">Order Summary</h5>
    <div class="d-flex justify-content-between mb-2">
      <span>Subtotal:</span>
      <span>‚Çπ{{ subtotal|floatformat:2 }}</span>
    </div>
    {% if order.promo_code %}
    <div class="d-flex justify-content-between mb-2">
      <span>Promo Code: <span class="badge bg-success">{{ order.promo_code.code }}</span> ({{ order.promo_code.discount_percentage }}% off)</span>
      <span>- ‚Çπ{{ discount|floatformat:2 }}</span>
    </div>
    {% endif %}
    <hr>
    <div class="d-flex justify-content-between fw-bold fs-5">
      <span>Total:</span>
      <span>‚Çπ{{ total|floatformat:2 }}</span>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="mt-4 d-flex flex-wrap gap-2">
    <a href="{% url 'accounts:my_orders' %}" class="btn btn-secondary">‚Üê Back to My Orders</a>
    <a href="{% url 'accounts:order_tracking' order.id %}" class="btn btn-info text-white">Track Order</a>
  </div>
</div>
{% endblock %}
